<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ - MemBrain</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f0f2f5; 
        }
        .app { 
            max-width: 600px; 
            margin: 0 auto; 
        }
        input, textarea { 
            width: 100%; 
            padding: 10px; 
            margin: 5px 0; 
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        button { 
            background: #2e54d7; 
            color: white; 
            padding: 12px; 
            border: none; 
            width: 100%;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px 0;
        }
        button:hover {
            background: #1e44c7;
        }
        .card-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #2e54d7;
        }
        .debug-info {
            background: #ffeaa7;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="app">
        <h1>‚úè –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏</h1>
        <a href="index.html" style="color: #2e54d7; text-decoration: none;">‚Üê –ù–∞–∑–∞–¥</a>

        <div style="background: white; padding: 20px; border-radius: 10px; margin-top: 20px;">
            <input type="text" id="deckTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–∏–æ–ª–æ–≥–∏—è)">
            
            <div style="margin: 20px 0;">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</h3>
                <textarea id="newQuestion" placeholder="–í–æ–ø—Ä–æ—Å..."></textarea>
                <textarea id="newAnswer" placeholder="–û—Ç–≤–µ—Ç..."></textarea>
                <button id="addCardBtn">+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
            </div>

            <!-- –ë–ª–æ–∫ –æ—Ç–ª–∞–¥–∫–∏ -->
            <div id="debugInfo" class="debug-info" style="display: none;">
                <strong>–û—Ç–ª–∞–¥–∫–∞:</strong> <span id="debugText"></span>
            </div>

            <div id="cardList">
                <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏ -->
            </div>

            <button id="saveDeckBtn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–º—É</button>
        </div>
    </div>

    <script>
        // JavaScript –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
        console.log('Manual page loaded');
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        function showDebug(message) {
            document.getElementById('debugText').textContent = message;
            document.getElementById('debugInfo').style.display = 'block';
            console.log('Debug:', message);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ (—Å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é)
        function getSavedCards() {
            // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            var cards = JSON.parse(localStorage.getItem('membrain-cards')) || [];
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫, –ø—Ä–æ–±—É–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
            if (cards.length === 0) {
                var oldData = localStorage.getItem('membrain-deck');
                if (oldData) {
                    try {
                        var deck = JSON.parse(oldData);
                        cards = deck.cards || [];
                        showDebug('–ù–∞–π–¥–µ–Ω—ã –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å—Ç–∞—Ä–æ–º —Ñ–æ—Ä–º–∞—Ç–µ: ' + cards.length + ' —à—Ç.');
                    } catch (e) {
                        showDebug('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö');
                    }
                }
            }
            
            showDebug('–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∫–∞—Ä—Ç–æ—á–µ–∫: ' + cards.length);
            return cards;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫
        function updateCardList() {
            var cardList = document.getElementById('cardList');
            var savedCards = getSavedCards();
            
            if (savedCards.length === 0) {
                cardList.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">–ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...</p>';
                return;
            }
            
            cardList.innerHTML = '<h3>–í–∞—à–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ (' + savedCards.length + '):</h3>';
            
            savedCards.forEach(function(card, index) {
                var question = card.question || '–ë–µ–∑ –≤–æ–ø—Ä–æ—Å–∞';
                var answer = card.answer || '–ë–µ–∑ –æ—Ç–≤–µ—Ç–∞';
                
                cardList.innerHTML += `
                    <div class="card-item">
                        <strong>${index + 1}. –í–æ–ø—Ä–æ—Å:</strong> ${question}<br>
                        <strong>–û—Ç–≤–µ—Ç:</strong> ${answer}
                    </div>
                `;
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏
        function addCard() {
            var question = document.getElementById('newQuestion').value.trim();
            var answer = document.getElementById('newAnswer').value.trim();
            
            if (question && answer) {
                // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
                var savedCards = getSavedCards();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É
                savedCards.push({
                    question: question,
                    answer: answer,
                    created: new Date().toLocaleString()
                });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ
                localStorage.setItem('membrain-cards', JSON.stringify(savedCards));
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
                document.getElementById('newQuestion').value = '';
                document.getElementById('newAnswer').value = '';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
                updateCardList();
                
                alert('–ö–∞—Ä—Ç–æ—á–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞! –í—Å–µ–≥–æ –∫–∞—Ä—Ç–æ—á–µ–∫: ' + savedCards.length);
            } else {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—Ç!');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–º—ã
        function saveDeck() {
            var title = document.getElementById('deckTitle').value.trim();
            var savedCards = getSavedCards();
            
            if (!title) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã!');
                return;
            }
            
            if (savedCards.length === 0) {
                alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É!');
                return;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–º—É
            var deck = {
                title: title,
                cards: savedCards,
                created: new Date().toLocaleString()
            };
            
            localStorage.setItem('membrain-deck-' + Date.now(), JSON.stringify(deck));
            alert('–¢–µ–º–∞ "' + title + '" —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞! –ö–∞—Ä—Ç–æ—á–µ–∫: ' + savedCards.length);
        }
        
        // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('addCardBtn').onclick = addCard;
            document.getElementById('saveDeckBtn').onclick = saveDeck;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
            updateCardList();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Enter –≤ –ø–æ–ª–µ –æ—Ç–≤–µ—Ç–∞
            document.getElementById('newAnswer').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addCard();
                }
            });
            
            showDebug('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        });
    </script>
</body>
</html>